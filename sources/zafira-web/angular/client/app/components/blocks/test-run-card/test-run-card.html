<div class="test-run-card" ng-class="{
            '_single': $ctrl.singleMode,
            '_mobile': $ctrl.windowWidthService.windowWidth <= $ctrl.mobileBreakpoint
        }">
    <div 
        ng-attr-id="testRun_{{$ctrl.testRun.id}}" 
        ng-if="$ctrl.windowWidthService.windowWidth > $ctrl.mobileBreakpoint"
        ng-class="{'background-gray': $ctrl.testRun.selected}" 
        class="test-run-card__wrapper {{$ctrl.testRun.status}}">
        <div class="wrapper">
            <div ng-if="!$ctrl.singleMode" name="testRunStatus" class="test-run-card__cell _selection">
                <span ng-click="addToSelectedtestRuns($ctrl.testRun)">
                    <md-checkbox name="testRunCheckbox" class="md-primary" 
                                aria-label="Select" 
                                data-ng-model="$ctrl.testRun.selected"
                        data-ng-if="$ctrl.testRun.selected || $ctrl.testRun.status !== 'IN_PROGRESS'"
                        data-ng-true-value="true" 
                        data-ng-false-value="false">
                    </md-checkbox>
                    <div ng-if="!$ctrl.testRun.selected && $ctrl.testRun.status === 'IN_PROGRESS'" data-ng-click="$ctrl.testRun.selected = true">
                        <md-progress-circular md-diameter="20px"></md-progress-circular>
                        <timer countdown="$ctrl.testRun.countdown" eta="$ctrl.testRun.eta" interval="1000" data-ng-if="$ctrl.testRun.countdown">
                            <small>{{progressBar}}%</small>
                        </timer>
                    </div>
                </span>
            </div>
            <div name="testRunInfo" class="test-run-card__cell _info">
                <div class="test-run-card__title-wrapper">
                    <div class="test-run-card__title">
                        {{$ctrl.testRun.testSuite.name}}
                        <md-tooltip md-direction="right">{{$ctrl.testRun.testSuite.fileName}}</md-tooltip>
                        <md-button aria-label="Show or hide tests" ng-click="switchTestRunExpand($ctrl.testRun)"
                            md-ink-ripple="false" class="md-icon-button no-padding expand-button">
                            <i class="fa expand-icon" ng-class="$ctrl.testRun.expand ? 'fa-angle-double-up' : 'fa-angle-double-down'"
                                aria-hidden="true">
                                <img src="../../assets/images/outline-arrow_drop_down_circle-24px.svg" />
                            </i>
                        </md-button>
                    </div>
                    <div class="test-run-card__title-additions">
                        <div data-ng-if="$ctrl.testRun.comments" class="test-run-card__state _comments">
                            <md-icon data-ng-click="showCommentsDialog($ctrl.testRun, $event)" aria-label="Comments"
                                aria-hidden="true" class="comments-area">comments</md-icon>
                            <md-tooltip md-direction="right">Comments</md-tooltip>
                        </div>
                        <div data-ng-if="$ctrl.testRun.reviewed" class="test-run-card__state _badge _reviewed" title="REVIEWED">R<md-tooltip
                                md-direction="right">Reviewed</md-tooltip>
                        </div>
                        <div data-ng-if="$ctrl.testRun.blocker" class="test-run-card__state _badge _blockers" title="BLOCKERS">B<md-tooltip
                                md-direction="right">Blockers</md-tooltip>
                        </div>
                    </div>
                </div>
                <div class="test-run-card__job">
                    <div class="test-run-card__job-name">
                        <a href="{{$ctrl.testRun.jenkinsURL}}" target="_blank">{{$ctrl.testRun.job.name}}</a>
                    </div>
                    <div class="test-run-card__job-file">
                        <div class="test-run-card__app-icon">
                            <md-icon class="material-icons testrun-appversion-icon" data-ng-if="!$ctrl.testRun.appVersionValid && $ctrl.testRun.appVersion">insert_drive_file</md-icon>
                            <md-icon class="material-icons testrun-appversion-icon" data-ng-if="$ctrl.testRun.appVersionValid && $ctrl.testRun.appVersion">file_download</md-icon>
                        </div>
                        <div class="test-run-card__app-name" ng-show="!$ctrl.testRun.appVersionValid" ng-mouseenter="checkFilePresence($ctrl.testRun)">{{$ctrl.testRun.appVersion}}</div>
                        <div class="test-run-card__app-name" ng-show="$ctrl.testRun.appVersionValid" ng-click="downloadApplication($ctrl.testRun.appVersion)">{{$ctrl.testRun.appVersion}}</div>
                        <div class="test-run-card__app-icon _spinner">
                            <md-progress-circular ng-show="$ctrl.testRun.appVersionLoading !== undefined" md-mode="indeterminate"
                                md-diameter="10px" style="display: inline-block" class="tests-loading-spinner"></md-progress-circular>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="wrapper">
            <div name="testRunEnv" class="test-run-card__cell _env">
                <span class="label label-default">{{$ctrl.testRun.env}}</span>
            </div>
            <div name="testRunPlatform" class="test-run-card__cell _platform">
                <span data-ng-if="$ctrl.testRun.platform !== ''" class="platform-icon {{$ctrl.testRun.platform | lowercase}}" />
                <span data-ng-if="$ctrl.testRun.platform === ''" class="platform-icon unknown"></span>
                <span data-ng-if="$ctrl.testRun.browserVersion" class="label label-default">{{$ctrl.testRun.browserVersion}}</span>
            </div>
            <div name="testRunStatistics" class="test-run-card__cell _statistics fixed-testcount-column"><span title="Passed"
                    class="label arrowed arrowed-in-right label-success-border" data-ng-class="$ctrl.testRun.passed ? 'label-success' : 'label-success-empty'">{{$ctrl.testRun.passed}}</span>
                <span title="Failed | Known issues | Blockers" class="label arrowed arrowed-in-right label-danger-border"
                    data-ng-class="$ctrl.testRun.failed ? 'label-danger' : 'label-danger-empty'">{{$ctrl.testRun.failed}}<span
                        class="delimiter">|</span>{{$ctrl.testRun.failedAsKnown}}<span class="delimiter">|</span>{{$ctrl.testRun.failedAsBlocker}}</span>
                <span title="Skipped" class="label arrowed arrowed-in-right label-warning-border" data-ng-class="$ctrl.testRun.skipped ? 'label-warning' : 'label-warning-empty'">{{$ctrl.testRun.skipped}}</span>
                <span title="Aborted" data-ng-if="$ctrl.testRun.aborted" class="label arrowed arrowed-in-right label-aborted-border"
                    data-ng-class="$ctrl.testRun.aborted ? 'label-aborted-bg' : 'label-aborted-empty'">{{$ctrl.testRun.aborted}}</span>
                <span title="Queued" data-ng-if="$ctrl.testRun.queued" class="label arrowed arrowed-in-right label-default-empty label-default-border">{{$ctrl.testRun.queued}}</span>
                <span title="In Progress" data-ng-if="$ctrl.testRun.inProgress" class="label arrowed arrowed-in-right label-info-border"
                    data-ng-class="$ctrl.testRun.inProgress ? 'label-info' : 'label-info-empty'">{{$ctrl.testRun.inProgress}}</span>
            </div>
            <div name="testRunStarted" class="test-run-card__cell _date startedat-column">
                <div class="time">
                    <span data-ng-hide="$ctrl.testRun.status === 'QUEUED' || $ctrl.testRun.status == 'ABORTED'">Started</span>
                    <span data-ng-if="$ctrl.testRun.status === 'QUEUED'">Queued</span>
                    <span data-ng-if="$ctrl.testRun.status === 'ABORTED'">Aborted</span>
                    <time am-time-ago="$ctrl.testRun.startedAt" title="{{ main.time | amDateFormat: 'dddd, MMMM Do YYYY, h:mm a' }}"></time>
                </div>
                <div data-ng-if="$ctrl.testRun.elapsed && $ctrl.testRun.elapsed > 0" class="light_text">
                    <i class="fa fa-clock-o" aria-hidden="true"></i>
                    <timer max-time-unit="'minute'" autostart="false" countdown="$ctrl.testRun.elapsed"><span ng-show="minutes">{{minutes}}
                            minute{{minutesS}}</span> <span ng-show="!minutes">{{seconds}} second{{secondsS}}</span></timer>
                </div>
            </div>
            <div class="test-run-card__cell _menu">
                <md-menu class="pull-right" md-offset="0 {{currentOffset}}">
                    <md-button name="testRunSetting" aria-label="User settings" class="md-icon-button" data-ng-click="initMenuRights($ctrl.testRun); setOffset($event); $mdMenu.open($event);">
                        <md-icon class="material-icons">more_vert</md-icon>
                    </md-button>
                    <md-menu-content width="2" class="fixed-md-menu-content">
                        <md-menu-item>
                            <md-button name="open" data-ng-click="openTestRun($ctrl.testRun)">
                                Open
                            </md-button>
                        </md-menu-item>
                        <md-menu-item>
                            <md-button name="copyLink" data-ng-click="copyLink($ctrl.testRun)">
                                Copy link
                            </md-button>
                        </md-menu-item>
                        <md-menu-item has-any-permission="['MODIFY_TEST_RUNS']">
                            <md-button name="markAsReviewed" data-ng-click="markAsReviewed($ctrl.testRun)">
                                Mark as reviewed
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="$ctrl.testRun.status != 'IN_PROGRESS' && tools['EMAIL']">
                            <md-button name="sendAsEmail" data-ng-click="sendAsEmail($ctrl.testRun, $event)">
                                Send as email
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="$ctrl.testRun.status != 'IN_PROGRESS' && tools['GOOGLE']">
                            <md-button name="createSpreadsheet" data-ng-click="createSpreadsheet($ctrl.testRun, $event)">
                                Export to Google
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="$ctrl.testRun.status != 'IN_PROGRESS'">
                            <md-button name="export" data-ng-click="export($ctrl.testRun)">
                                Export to HTML
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="showNotifyInSlackOption" has-any-permission="['MODIFY_TEST_RUNS']">
                            <md-button name="notifyInSlack" data-ng-click="notifyInSlack($ctrl.testRun)">
                                Notify in Slack
                            </md-button>
                        </md-menu-item>
                        <md-divider></md-divider>
                        <md-menu-item ng-if="showBuildNowOption" has-any-permission="['TEST_RUNS_CI']">
                            <md-button name="buildNow" data-ng-click="buildNow($ctrl.testRun, $event)">
                                Build now
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="$ctrl.testRun.status=='IN_PROGRESS'" has-any-permission="['TEST_RUNS_CI']">
                            <md-button name="abort" data-ng-click="abort($ctrl.testRun, false)">
                                Abort
                            </md-button>
                        </md-menu-item>
                        <md-menu-item has-any-permission="['TEST_RUNS_CI']">
                            <md-button name="rebuild" data-ng-click="rerun($ctrl.testRun, $event)">
                                Rebuild
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="$ctrl.testRun.status!='PASSED'" has-any-permission="['TEST_RUNS_CI']">
                            <md-button name="debug" ng-click="startDebug($ctrl.testRun)">
                                Debug
                            </md-button>
                        </md-menu-item>
                        <md-divider has-any-permission="['MODIFY_TEST_RUNS']"></md-divider>
                        <md-menu-item ng-if="showDeleteTestRunOption" has-any-permission="['MODIFY_TEST_RUNS']">
                            <md-button name="delete" data-ng-click="deleteTestRunAction($ctrl.testRun)">
                                Delete
                            </md-button>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>
            </div>
        </div>
    </div>

    <!--MOBILE VERSION--> 
    <div ng-attr-id="testRun_{{$ctrl.testRun.id}}" ng-if="$ctrl.windowWidthService.windowWidth <= $ctrl.mobileBreakpoint"
        ng-class="{'background-gray': $ctrl.testRun.selected}" class="test-run-card__wrapper {{$ctrl.testRun.status}}">
        <div class="test-run-card__row _top">
            <div ng-if="!$ctrl.singleMode" name="testRunStatus" class="test-run-card__cell _selection">
                <span ng-click="addToSelectedtestRuns($ctrl.testRun)">
                    <md-checkbox name="testRunCheckbox" class="md-primary" aria-label="Select" data-ng-model="$ctrl.testRun.selected"
                        data-ng-if="$ctrl.testRun.selected || $ctrl.testRun.status !== 'IN_PROGRESS'"
                        data-ng-true-value="true" data-ng-false-value="false">
                    </md-checkbox>
                    <div ng-if="!$ctrl.testRun.selected && $ctrl.testRun.status === 'IN_PROGRESS'" data-ng-click="$ctrl.testRun.selected = true">
                        <md-progress-circular md-diameter="20px"></md-progress-circular>
                        <timer countdown="$ctrl.testRun.countdown" eta="$ctrl.testRun.eta" interval="1000" data-ng-if="$ctrl.testRun.countdown">
                            <small>{{progressBar}}%</small>
                        </timer>
                    </div>
                </span>
            </div>
            <div name="testRunInfo" class="test-run-card__cell _info">
                <div class="test-run-card__title">
                    {{$ctrl.testRun.testSuite.name}}
                    <md-tooltip md-direction="right">{{$ctrl.testRun.testSuite.fileName}}</md-tooltip>
                </div>
                <div>
                    <a href="{{$ctrl.testRun.jenkinsURL}}" target="_blank">{{$ctrl.testRun.job.name}}</a>
                </div>
            </div>
            <div name="testRunInfo" class="test-run-card__cell _actions">
                <md-button aria-label="Show or hide tests"  ng-click="$ctrl.showSingleVersion()" md-ink-ripple="false"
                    class="md-icon-button no-padding expand-button">
                    <i class="fa expand-icon" ng-class="$ctrl.testRun.expand ? 'fa-angle-double-up' : 'fa-angle-double-down'"
                        aria-hidden="true">
                        <img src="../../assets/images/outline-arrow_drop_down_circle-24px.svg" />
                    </i>
                    <i class="material-icons clear">
                        clear
                    </i>
                </md-button>
                <md-menu md-offset="0 {{currentOffset}}">
                    <md-button name="testRunSetting" aria-label="User settings" class="md-icon-button" data-ng-click="setOffset($event); initMenuRights($ctrl.testRun); $mdMenu.open($event);">
                        <md-icon class="material-icons">more_vert</md-icon>
                    </md-button>
                    <md-menu-content width="2" class="fixed-md-menu-content">
                        <md-menu-item>
                            <md-button name="open" data-ng-click="openTestRun($ctrl.testRun)">
                                Open
                            </md-button>
                        </md-menu-item>
                        <md-menu-item>
                            <md-button name="copyLink" data-ng-click="copyLink($ctrl.testRun)">
                                Copy link
                            </md-button>
                        </md-menu-item>
                        <md-menu-item has-any-permission="['MODIFY_TEST_RUNS']">
                            <md-button name="markAsReviewed" data-ng-click="markAsReviewed($ctrl.testRun)">
                                Mark as reviewed
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="$ctrl.testRun.status != 'IN_PROGRESS' && tools['EMAIL']">
                            <md-button name="sendAsEmail" data-ng-click="sendAsEmail($ctrl.testRun, $event)">
                                Send as email
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="$ctrl.testRun.status != 'IN_PROGRESS' && tools['GOOGLE']">
                            <md-button name="createSpreadsheet" data-ng-click="createSpreadsheet($ctrl.testRun, $event)">
                                Export to Google
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="$ctrl.testRun.status != 'IN_PROGRESS'">
                            <md-button name="export" data-ng-click="export($ctrl.testRun)">
                                Export to HTML
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="showNotifyInSlackOption" has-any-permission="['MODIFY_TEST_RUNS']">
                            <md-button name="notifyInSlack" data-ng-click="notifyInSlack($ctrl.testRun)">
                                Notify in Slack
                            </md-button>
                        </md-menu-item>
                        <md-divider></md-divider>
                        <md-menu-item ng-if="showBuildNowOption" has-any-permission="['TEST_RUNS_CI']">
                            <md-button name="buildNow" data-ng-click="buildNow($ctrl.testRun, $event)">
                                Build now
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="$ctrl.testRun.status=='IN_PROGRESS'" has-any-permission="['TEST_RUNS_CI']">
                            <md-button name="abort" data-ng-click="abort($ctrl.testRun, false)">
                                Abort
                            </md-button>
                        </md-menu-item>
                        <md-menu-item has-any-permission="['TEST_RUNS_CI']">
                            <md-button name="rebuild" data-ng-click="rerun($ctrl.testRun, $event)">
                                Rebuild
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="$ctrl.testRun.status!='PASSED'" has-any-permission="['TEST_RUNS_CI']">
                            <md-button name="debug" ng-click="startDebug($ctrl.testRun)">
                                Debug
                            </md-button>
                        </md-menu-item>
                        <md-divider has-any-permission="['MODIFY_TEST_RUNS']"></md-divider>
                        <md-menu-item ng-if="showDeleteTestRunOption" has-any-permission="['MODIFY_TEST_RUNS']">
                            <md-button name="delete" data-ng-click="deleteTestRunAction($ctrl.testRun)">
                                Delete
                            </md-button>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>
            </div>
        </div>
        <div class="test-run-card__row _wrapper _middle">
            <div class="test-run-card__row _app-file">
                <div class="test-run-card__app-icon">
                    <md-icon class="material-icons testrun-appversion-icon" data-ng-if="true || !$ctrl.testRun.appVersionValid && $ctrl.testRun.appVersion">insert_drive_file</md-icon>
                    <md-icon class="material-icons testrun-appversion-icon" data-ng-if="$ctrl.testRun.appVersionValid && $ctrl.testRun.appVersion">file_download</md-icon>
                </div>
                <div class="test-run-card__app-name" ng-show="true || !$ctrl.testRun.appVersionValid" ng-mouseenter="checkFilePresence($ctrl.testRun)">myfitnesspal-develop-11361-release.apk{{$ctrl.testRun.appVersion}}</div>
                <div class="test-run-card__app-name" ng-show="$ctrl.testRun.appVersionValid" ng-click="downloadApplication($ctrl.testRun.appVersion)">{{$ctrl.testRun.appVersion}}</div>
                <div class="test-run-card__app-icon _spinner">
                    <md-progress-circular ng-show="$ctrl.testRun.appVersionLoading !== undefined" md-mode="indeterminate"
                        md-diameter="10px" style="display: inline-block" class="tests-loading-spinner"></md-progress-circular>
                </div>
            </div>
            <div class="test-run-card__row _tags">
                <div name="testRunEnv" class="test-run-card__cell _env">
                    <span class="label label-default">{{$ctrl.testRun.env}}</span>
                </div>
                <div name="testRunPlatform" class="test-run-card__cell _platform no-padding browser-version_column"
                    ng-if="$ctrl.testRun.platform || $ctrl.testRun.browserVersion">
                    <span data-ng-if="$ctrl.testRun.platform !== ''" class="platform-icon {{$ctrl.testRun.platform | lowercase}}" />
                    <span data-ng-if="$ctrl.testRun.platform === ''" class="platform-icon unknown"></span>
                    <span data-ng-if="$ctrl.testRun.browserVersion" class="label label-default">v.70.0{{$ctrl.testRun.browserVersion}}</span>
                </div>
            </div>
            <div class="test-run-card__row _data">
                <div name="testRunStatistics" class="test-run-card__cell _statistics">
                    <span title="Passed" class="label arrowed arrowed-in-right label-success-border" data-ng-class="$ctrl.testRun.passed ? 'label-success' : 'label-success-empty'">{{$ctrl.testRun.passed}}</span>
                    <span title="Failed | Known issues | Blockers" class="label arrowed arrowed-in-right label-danger-border"
                        data-ng-class="$ctrl.testRun.failed ? 'label-danger' : 'label-danger-empty'">{{$ctrl.testRun.failed}}<span
                            class="delimiter"> | </span>{{$ctrl.testRun.failedAsKnown}}<span class="delimiter"> |
                        </span>{{$ctrl.testRun.failedAsBlocker}}</span>
                    <span title="Skipped" class="label arrowed arrowed-in-right label-warning-border" data-ng-class="$ctrl.testRun.skipped ? 'label-warning' : 'label-warning-empty'">{{$ctrl.testRun.skipped}}</span>
                    <span title="Aborted" data-ng-if="$ctrl.testRun.aborted" class="label arrowed arrowed-in-right label-aborted-border"
                        data-ng-class="$ctrl.testRun.aborted ? 'label-aborted-bg' : 'label-aborted-empty'">{{$ctrl.testRun.aborted}}</span>
                    <span title="Queued" data-ng-if="$ctrl.testRun.queued" class="label arrowed arrowed-in-right label-default-empty label-default-border">{{$ctrl.testRun.queued}}</span>
                    <span title="In Progress" data-ng-if="$ctrl.testRun.inProgress" class="label arrowed arrowed-in-right label-info-border"
                        data-ng-class="$ctrl.testRun.inProgress ? 'label-info' : 'label-info-empty'">{{$ctrl.testRun.inProgress}}</span>
                </div>
                <div name="testRunStarted" class="test-run-card__cell _date">
                    <div class="test-run-card__time _light">
                        <i class="test-run-card__time-icon fa fa-clock-o" aria-hidden="true"></i> <time class="test-run-card__time-text"
                            am-time-ago="$ctrl.testRun.startedAt" title="{{ main.time | amDateFormat: 'dddd, MMMM Do YYYY, h:mm a' }}"></time>
                    </div>
                    <div data-ng-if="$ctrl.testRun.elapsed && $ctrl.testRun.elapsed > 0" class="test-run-card__time _light">
                        <i class="test-run-card__time-icon fa fa-clock-o" aria-hidden="true"></i>
                        <timer class="test-run-card__time-text" max-time-unit="'minute'" autostart="false" countdown="$ctrl.testRun.elapsed"><span
                                ng-show="minutes">{{minutes}} minute{{minutesS}}</span> <span ng-show="!minutes">{{seconds}}
                                second{{secondsS}}</span></timer>
                    </div>
                </div>
            </div>
        </div>
        <div class="test-run-card__row _bottom">
            <div data-ng-if="$ctrl.testRun.comments" class="test-run-card__state _comments">
                <md-icon data-ng-click="showCommentsDialog($ctrl.testRun, $event)" aria-label="Comments" aria-hidden="true"
                    class="comments-area">comments</md-icon>
                <md-tooltip md-direction="right">Comments</md-tooltip>
            </div>
            <div data-ng-if="$ctrl.testRun.reviewed" class="test-run-card__state _badge _reviewed" title="REVIEWED">R<md-tooltip
                    md-direction="right">Reviewed</md-tooltip>
            </div>
            <div data-ng-if="$ctrl.testRun.blocker" class="test-run-card__state _badge _blockers" title="BLOCKERS">B<md-tooltip
                    md-direction="right">Blockers</md-tooltip>
            </div>
            <div class="test-run-card__cell _menu">
                <md-menu md-offset="0 {{currentOffset}}">
                    <md-button name="testRunSetting" aria-label="User settings" class="md-icon-button" data-ng-click="setOffset($event); initMenuRights($ctrl.testRun); $mdMenu.open($event);">
                        <md-icon class="material-icons">more_vert</md-icon>
                    </md-button>
                    <md-menu-content width="2" class="fixed-md-menu-content">
                        <md-menu-item>
                            <md-button name="open" data-ng-click="openTestRun($ctrl.testRun)">
                                Open
                            </md-button>
                        </md-menu-item>
                        <md-menu-item>
                            <md-button name="copyLink" data-ng-click="copyLink($ctrl.testRun)">
                                Copy link
                            </md-button>
                        </md-menu-item>
                        <md-menu-item has-any-permission="['MODIFY_TEST_RUNS']">
                            <md-button name="markAsReviewed" data-ng-click="markAsReviewed($ctrl.testRun)">
                                Mark as reviewed
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="$ctrl.testRun.status != 'IN_PROGRESS' && tools['EMAIL']">
                            <md-button name="sendAsEmail" data-ng-click="sendAsEmail($ctrl.testRun, $event)">
                                Send as email
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="$ctrl.testRun.status != 'IN_PROGRESS' && tools['GOOGLE']">
                            <md-button name="createSpreadsheet" data-ng-click="createSpreadsheet($ctrl.testRun, $event)">
                                Export to Google
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="$ctrl.testRun.status != 'IN_PROGRESS'">
                            <md-button name="export" data-ng-click="export($ctrl.testRun)">
                                Export to HTML
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="showNotifyInSlackOption" has-any-permission="['MODIFY_TEST_RUNS']">
                            <md-button name="notifyInSlack" data-ng-click="notifyInSlack($ctrl.testRun)">
                                Notify in Slack
                            </md-button>
                        </md-menu-item>
                        <md-divider></md-divider>
                        <md-menu-item ng-if="showBuildNowOption" has-any-permission="['TEST_RUNS_CI']">
                            <md-button name="buildNow" data-ng-click="buildNow($ctrl.testRun, $event)">
                                Build now
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="$ctrl.testRun.status=='IN_PROGRESS'" has-any-permission="['TEST_RUNS_CI']">
                            <md-button name="abort" data-ng-click="abort($ctrl.testRun, false)">
                                Abort
                            </md-button>
                        </md-menu-item>
                        <md-menu-item has-any-permission="['TEST_RUNS_CI']">
                            <md-button name="rebuild" data-ng-click="rerun($ctrl.testRun, $event)">
                                Rebuild
                            </md-button>
                        </md-menu-item>
                        <md-menu-item ng-if="$ctrl.testRun.status!='PASSED'" has-any-permission="['TEST_RUNS_CI']">
                            <md-button name="debug" ng-click="startDebug($ctrl.testRun)">
                                Debug
                            </md-button>
                        </md-menu-item>
                        <md-divider has-any-permission="['MODIFY_TEST_RUNS']"></md-divider>
                        <md-menu-item ng-if="showDeleteTestRunOption" has-any-permission="['MODIFY_TEST_RUNS']">
                            <md-button name="delete" data-ng-click="deleteTestRunAction($ctrl.testRun)">
                                Delete
                            </md-button>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>
            </div>
        </div>
    </div>
</div>
